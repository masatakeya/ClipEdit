# 要件定義書

## クリップボードテキストエディタ

### プロジェクト概要

スマートフォンブラウザ上で動作する、クリップボード連携に特化したシンプルなテキストエディタの開発

---

## 1. 目的・ユースケース

### 1.1 目的

- スマートフォンのブラウザ上で他のアプリからコピーしたテキストを軽く編集してまた貼り付ける

### 1.2 想定利用シーン

- メッセージアプリでのテキスト整形
- SNS投稿前の文章校正
- コピーしたテキストの一部修正・加工
- 長文の分割・結合作業

---

## 2. 対象ユーザー

### 2.1 プライマリユーザー

- **個人利用者（自分用）**

### 2.2 ユーザー特性

- スマートフォンを主要デバイスとして使用
- 日常的にテキストのコピー・ペースト作業を行う
- シンプルで直感的な操作を好む

---

## 3. 機能要件

### 3.1 コア機能

#### 3.1.1 クリップボード操作

- **ペースト機能**
  - クリップボードからテキストを読み込み（自動ペースト）
  - 手動ペースト（Ctrl+V、長押し→ペースト）も可能
- **コピー機能**
  - 編集したテキストをクリップボードに保存（自動コピー）
- **フォールバック処理**
  - Clipboard APIが利用できない、またはユーザーに拒否された場合、以下の通り手動操作を案内する。
    - **ペースト時**: 「テキストエリアを長押ししてペーストしてください」などのメッセージを通知エリアに表示する。
    - **コピー時**: テキストエリアの全文字列を選択状態にし、「テキストを全選択しました。手動でコピーしてください」などのメッセージを通知エリアに表示する。

#### 3.1.2 テキスト編集

- **基本編集機能**
  - テキストの入力・削除・選択
  - 複数行テキストの編集
  - 全選択機能

- **編集支援機能**
  - Undo/Redo機能（履歴最大10回）
  - 検索・置換機能
    - 前方・後方検索
    - 大文字小文字区別設定
    - 個別置換・一括置換

#### 3.1.3 情報表示

- **統計情報**
  - 文字数カウント
  - 行数カウント
  - リアルタイム更新

### 3.2 ユーザーインターフェース

#### 3.2.1 画面構成

```text
[ヘッダー]
├── タイトル
└── 主要操作ボタン（クリップボード読込、コピー）

[メインエリア]
├── 空状態表示（初期状態）
├── テキスト編集エリア
└── 統計情報バー

[ツールバー]
├── 編集支援機能（クリア、全選択）
└── 高度な機能（検索・置換、Undo/Redo）

[通知エリア]
└── 操作結果のフィードバック
```

#### 3.2.2 操作フロー

1. **基本フロー（成功時）**

   ```text
   他アプリでコピー → 「クリップボード読込」ボタンをタップ → （権限許可後）クリップボードからテキストを自動ペースト → 編集 → 「コピー」ボタンをタップ → （成功時）クリップボードへコピー完了 → 他アプリで貼り付け
   ```

2. **基本フロー（フォールバック時）**

   ```text
   他アプリでコピー → 「クリップボード読込」ボタンをタップ → （API失敗時）手動ペーストを促す案内 → テキストエリア長押し → ペースト → 編集 → 「コピー」ボタンをタップ → （API失敗時）手動コピーを促す案内（テキスト全選択） → テキスト長押し → コピー → 他アプリで貼り付け
   ```

3. **検索・置換フロー**

   ```text
   テキスト編集中 → 検索ボタン → 検索パネル表示 → 検索実行 → 置換（オプション）
   ```

---

## 4. 非機能要件

### 4.1 パフォーマンス

- **対象テキストサイズ**: 数千文字（～5,000文字）での快適動作
- **履歴管理**: 最大10回の操作履歴
- **レスポンス時間**: UI操作に対する即座の反応

### 4.2 対応環境

- **プライマリ**: スマートフォンブラウザ
  - iOS Safari
  - Android Chrome
- **セカンダリ**: デスクトップブラウザ（レスポンシブ対応）

### 4.3 ユーザビリティ

- **モバイルファースト設計**
- **タッチフレンドリー**: 最小タッチターゲット44px
- **フォントサイズ**: 16px以上（iOSズーム防止）
- **アクセシビリティ**: WCAG 2.1 レベルAAへの準拠を目標とし、適切なコントラスト比の確保やセマンティックなHTML構造を維持する。

---

## 5. 技術的制約

### 5.1 開発制約

- **外部依存なし**: CDN、外部ライブラリを使用しない
- **オフライン動作**: ネットワーク接続不要

### 5.2 ブラウザ制約

- **Clipboard API制限**: 権限ポリシーによるAPI使用不可環境への対応
- **HTTPS必須**: Clipboard APIの動作保証のため、本番環境ではHTTPS接続を必須とする。

### 5.3 データ保存

- **永続化不要**: ファイル保存機能は提供しない
- **セッション管理**: ブラウザセッション内でのみデータ保持
- **プライバシー**: ユーザーデータを外部送信しない

---

## 6. 実装優先度

### 6.1 Phase 1: 基本機能（MVP）

- [完了] クリップボード操作（ペースト準備、コピー）
- [完了] テキスト編集エリア
- [完了] 統計情報表示
- [完了] 基本的なUI・UX

### 6.2 Phase 2: 編集支援

- [未実装] Undo/Redo機能（10回履歴）
- [未実装] 改善されたキーボードショートカット
- [未実装] エラーハンドリング強化

### 6.3 Phase 3: 高度な機能

- [未実装] 検索・置換機能
- [未実装] 検索パネル（モバイル最適化）
- [未実装] 正規表現サポート

---

## 7. 成功指標

### 7.1 機能的指標

- クリップボード操作の成功率: 95%以上
- レスポンス時間: 操作後100ms以内の反応
- エラー発生率: 1%未満

### 7.2 ユーザビリティ指標

- 初回利用時の操作完了率: 90%以上
- 手動ペースト・コピーの案内理解率: 95%以上

### 7.3 計測方法

- **計測方針**: 「外部依存なし」の制約上、クライアントサイドでの詳細なアナリティクスは導入しない。
- **評価方法**: 定期的な手動テストや、可能であれば小規模なユーザーテストを実施し、定性的なフィードバックと合わせて評価する。

---

## 8. リスク・制約事項

### 8.1 技術的リスク

- **Clipboard API制限**: ブラウザ・環境による機能制限
- **モバイルブラウザ差異**: iOS/Android間の動作差異
- **権限ポリシー**: CSPやPermissions Policyによる機能制限

### 8.2 対応策

- **フォールバック戦略**: 手動操作への適切な誘導
- **段階的グレースフル・デグラデーション**
- **クロスブラウザテスト**: 主要環境での動作確認

---

## 9. 今後の拡張可能性

### 9.1 短期的拡張

- テーマ・ダークモード対応
- フォントサイズ調整機能
- キーボードショートカットカスタマイズ

### 9.2 長期的拡張

- 構文ハイライト機能
- 複数タブ・分割編集
- ローカルストレージ活用（設定保存）

---

**文書バージョン**: 1.0  
**作成日**: 2025年7月13日  
**最終更新**: 2025年7月13日